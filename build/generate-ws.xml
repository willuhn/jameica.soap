<?xml version="1.0" encoding="ISO-8859-1"?>

<!--
 $Revision: 1.2 $
 $Date: 2008/07/11 12:56:58 $
 $Author: willuhn $
 
 Copyright (c) by willuhn software & services
 All rights reserved
 
 Beispiel fuer ein Ant-Script zum Erzeugen der Java-Klassen anhand der WSDL-URL
 des Echo-Services. Der Source wird im Package "testclient" abgelegt.
 Damit das Ant-Script funktioniert, muss der Jameica-Server mit den
 Plugins "jameica.webadmin" und "jameica.soap" bereits auf localhost
 laufen, da sonst das Herunterladen der WSDL-Datei von der in "$wsdl.url"
 angegebenen URL fehlschlaegt.
 Ein Beispiel-Aufruf des Services koennte dann so aussehen:
 
 testclient.EchoService echo = new testclient.EchoService();
 testclient.Echo e = echo.getEchoPort();
 System.out.println(e.echo("Hallo Welt"));
-->

<project basedir=".." default="all" name="All">
  <target name="init">

    <!-- URL der WSDL-Datei. Per Default wird HTTPS verwendet, was
         beim Aufruf von wsdl2java jedoch zu einem Fehler fuehrt. Daher
         hier ohne SSL. Das laesst dich in .jameica/cfg/de.willuhn.jameica.webadmin.Plugin.properties
         durch die folgenden beiden Parameter bewerkstelligen:
         
         listener.http.ssl=false
         listener.http.auth=false
    //-->
    <property name="wsdl.url" value="http://localhost:8080/soap/echo?wsdl" />
    <property environment="env" />
    
    <path id="compilepath">
      <pathelement path="lib/cxf-manifest.jar" />
      <fileset dir="../jameica">
        <include name="lib/**/*.jar" />
      </fileset>
    </path>

  </target>

  <target depends="init" name="generate">
    <java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" classpathref="compilepath" failonerror="true" fork="true" dir=".">
      <arg line="-p testclient -d src -client -verbose -autoNameResolution ${wsdl.url}" />
    </java>
  </target>

  <target depends="generate" name="all" />
</project>
